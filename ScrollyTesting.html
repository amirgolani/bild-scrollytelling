<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css"
    integrity="sha512-Zcn6bjR/8RZbLEpLIeOwNtzREBAJnUKESxces60Mpoj+2okopSAcSUIUOseddDm0cxnGQzxIR7vJgsLZbdLE3w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" /> <!-- Leaflet JavaScript -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/leaflet.sync@0.2.4/L.Map.Sync.min.js"></script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GSAP Scroll Animation</title>
  <style>
    .box.active {
      background-color: blue;
    }

    body {
      background-color: #111;
      background-image:
        linear-gradient(rgba(255, 255, 255, .07) 2px, transparent 2px),
        linear-gradient(90deg, rgba(255, 255, 255, .07) 2px, transparent 2px),
        linear-gradient(rgba(255, 255, 255, .06) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, .06) 1px, transparent 1px);
      background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
      background-position: -2px -2px, -2px -2px, -1px -1px, -1px -1px;
      height: 2160px;
      padding: 0px;
      margin: 0px;
    }

    .first-hero {
      height: 100%;
      background-color: #28a92b;
      padding: 0px;
      margin: 0px;
    }

    .box {
      width: 100px;
      height: 100px;
      background-color: #28a92b;
      position: absolute;
      left: 100px;
      z-index: 100;
      line-height: 100px;
      font-size: 50px;
      text-align: center;
    }

    .a {
      top: 200px;
      background-color: #8d3dae;
    }

    .b {
      top: 600px;
    }

    .c {
      top: 800px;
      background-color: #e26c16;
    }

    .ghost {
      top: 1000px;
      background-color: #444;
    }

    .line {
      width: 2px;
      height: 3000px;
      position: absolute;
      left: 600px;
      top: 0px;
      /*   visibility: hidden; */
      background-color: #777;
    }
  </style>
</head>

<body>

  <!-- <div class="first-hero">h</div> -->
  <div class="box a">a</div>
  <div class="box b">b</div>
  <!-- <div class="box ghost">c</div> -->
  <div class="box c">c</div>

  <div id="mainMap" style="position: absolute; left: 0; top: 1000px; height: 400px; width: 1920px;"></div>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.0/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

  <script>
    var mainMap = L.map('mainMap').setView([50, 30], 8);
    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
      maxZoom: 16
    }).addTo(mainMap)

  </script>
  <script>
    // For more information, see greensock.com/docs/v3/Plugins/ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    gsap.to('#mainMap',
      {
        onStart: async () => {
          var targetLocation = L.latLng(52, 32);
          mainMap.flyTo(targetLocation, 4, {
            animate: true,
            duration: 1
          })
        },
        scrollTrigger: {
          trigger: "#mainMap",
          start: "top 50%",
          // end: "top 20%",
          // scrub: true,
          // markers: true,
          pin: true,
          id: "scrub"
        }
      })

    // You can use a ScrollTrigger in a tween or timeline
    gsap.to(".b", {
      x: 100,
      rotation: 90,
      ease: 'ease4.inOut',
      scrollTrigger: {
        trigger: ".b",
        start: "top 50%",
        end: "top 20%",
        scrub: true,
        // markers: true,
        id: "scrub"
      }
    });

    // You can use a ScrollTrigger in a tween or timeline
    gsap.to(".c", {
      x: 100,
      rotation: 90,
      ease: 'ease4.inOut',
      scrollTrigger: {
        trigger: ".c",
        start: "top 50%",
        // end: "top 20%",
        // scrub: true,
        // markers: true,
        id: "scrub"
      }
    });


    // Or you can attach a tween or timeline to a ScrollTrigger later
    // const anim = gsap.to(".c", {
    //   x: 400,
    //   rotation: 360,
    //   duration: 3
    // });

    // ScrollTrigger.create({
    //   trigger: ".c",
    //   animation: anim,
    //   // Uncomment these to see how they affect the ScrollTrigger
    //   // markers: true,
    //   // start: "top center",
    //   // end: "top 100px",
    //   // toggleClass: "active",
    //   // pin: true,
    //   // scrub: 1,
    //   // onUpdate: self => {
    //   //   console.log("progress:", self.progress.toFixed(3), "direction:", self.direction, "velocity", self.getVelocity());
    //   // }
    // });

  </script>
</body>

</html>